/*!
 * vue-jsonpath-picker v1.0.1
 * (c) Oscar Marie--Taillefer
 * Released under the MIT License.
 */
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function isCollapsable(e){return e instanceof Object&&Object.keys(e).length>0}function isUrl(e){return/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)}function json2html(e,t){var n="";if("string"==typeof e){var a=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");isUrl(a)?n+='<a href="'.concat(a,'" class="json-string">').concat(a,"</a>"):n+='<span class="json-string">"'.concat(a,'"</span>')}else if("number"==typeof e)n+='<span class="json-literal">'.concat(e,"</span>");else if("boolean"==typeof e)n+='<span class="json-literal">'.concat(e,"</span>");else if(null===e)n+='<span class="json-literal">null</span>';else if(e instanceof Array)if(e.length>0){n+='[<ol class="json-array">';for(var o=0;o<e.length;o+=1)n+='<li data-key-type="array" data-key="'.concat(o,'">'),isCollapsable(e[o])&&(n+='<a href class="json-toggle"></a>'),n+=json2html(e[o],t),o<e.length-1&&(n+=","),n+="</li>";n+="</ol>]"}else n+="[]";else if("object"===_typeof(e)){var r=Object.keys(e).length;if(r>0){for(var s in n+='{<ul class="json-dict">',e)if(e.hasOwnProperty(s)){n+='<li data-key-type="object" data-key="'.concat(s,'">');var i=t.outputWithQuotes?'<span class="json-string">"'.concat(s,'"</span>'):s;isCollapsable(e[s])?n+='<a href class="json-toggle">'.concat(i,"</a>"):n+=i,n+='<span class="pick-path" title="Pick path">&'+t.pickerIcon+";</span>",n+=": ".concat(json2html(e[s],t)),(r-=1)>0&&(n+=","),n+="</li>"}n+="</ul>}"}else n+="{}"}return n}function off(e,t,n,a){var o=a,r=n,s=t;"function"==typeof t&&(o=n,r=t,s=window),o=!!o,(s="string"==typeof s?document.querySelector(s):s)&&s.removeEventListener(e,r,o)}function siblings(e,t,n){for(var a=[],o=0;o<e.parentNode.children.length;o+=1){var r=e.parentNode.children[o];r===e||t&&!r.matches(t)||a.push(r)}if(n&&"function"==typeof n)for(var s=0;s<a.length;s+=1)n(a[s]);return a}function fireClick(e){var t;if(e.ownerDocument)t=e.ownerDocument;else{if(9!==e.nodeType)throw new Error("Invalid node passed to fireEvent: ".concat(e.id));t=e}if(e.dispatchEvent){var n=t.createEvent("MouseEvents");n.initEvent("click",!0,!0),n.synthetic=!0,e.dispatchEvent(n,!0)}else if(e.fireEvent){var a=t.createEventObject();a.synthetic=!0,e.fireEvent("onclick",a)}}function isHidden(e){var t=e.offsetWidth,n=e.offsetHeight;return 0===t&&0===n||"none"===window.getComputedStyle(e).display}function getParents(e,t){for(var n=[],a=e&&e.parentElement;a;a=a.parentElement)t&&!a.matches(t)||n.push(a);return n}function jsonPathPicker(e,t,n,a){var o=a||{};if(!e instanceof Element)return 1;var r=[];if(!n)return 3;if(n.length)r=n;else{if(!n.value)return 3;r=[n]}o.pathQuotesType=void 0!==o.pathQuotesType?o.pathQuotesType:"single",o.pickerIcon=o.pickerIcon||"#x1f4cb";var s=json2html(t,o);function i(e,t){e.classList.toggle("collapsed");for(var n=siblings(e,"ul.json-dict, ol.json-array",function(e){e.style.display=""===e.style.display||"block"===e.style.display?"none":"block"}),a=0;a<n.length;a+=1)if(isHidden(n[a])){for(var o=n[a].children,r=0,s=0;s<o.length;s+=1)"LI"===o[s].tagName&&(r+=1);var i=r+(r>1?" items":" item");n[a].insertAdjacentHTML("afterend",'<a href class="json-placeholder">'.concat(i,"</a>"))}else siblings(n[a],".json-placeholder",function(e){return e.parentNode.removeChild(e)});t.stopPropagation(),t.preventDefault()}function c(e,t){siblings(e,"a.json-toggle",function(e){return fireClick(e)}),t.stopPropagation(),t.preventDefault()}function l(e){if(0!==r.length){for(var t=getParents(e,"li").reverse(),n=[],a=0;a<t.length;a+=1){var s=t[a].dataset.key,i=t[a].dataset.keyType;if("object"===i&&"number"!=typeof s&&o.processKeys&&void 0!==o.keyReplaceRegexPattern){var c=new RegExp(o.keyReplaceRegexPattern,o.keyReplaceRegexFlags),l=void 0===o.keyReplacementText?"":o.keyReplacementText;s=s.replace(c,l)}n.push({key:s,keyType:i})}for(var p={none:"",single:"'",double:'"'}[o.pathQuotesType],d=(n=n.map(function(e,t){var n="brackets"===o.pathNotation,a=!/^\w+$/.test(e.key)||"number"==typeof e.key;return"array"===e.keyType||e.isKeyANumber?"[".concat(e.key,"]"):n||a?"[".concat(p).concat(e.key).concat(p,"]"):t>0?".".concat(e.key):e.key})).join(""),f=0;f<r.length;f+=1)void 0!==r[f].value&&(r[f].value=d)}}if(isCollapsable(t)&&(s='<a href class="json-toggle"></a>'.concat(s)),e.innerHTML=s,off("click",e),e.addEventListener("click",function(e){for(var t=e.target;t&&t!==this;)t.matches("a.json-toggle")&&(i.call(null,t,e),e.stopPropagation(),e.preventDefault()),t=t.parentNode}),e.addEventListener("click",function(e){for(var t=e.target;t&&t!==this;)t.matches("a.json-placeholder")&&c.call(null,t,e),t=t.parentNode}),e.addEventListener("click",function(e){for(var t=e.target;t&&t!==this;)t.matches(".pick-path")&&l.call(null,t,e),t=t.parentNode}),!0===o.outputCollapsed)for(var p=document.querySelectorAll("a.json-toggle"),d=0;d<p.length;d+=1)fireClick(p[d])}function clearJsonPathPicker(e){e.removeEventListener("click")}var jsonpathPickerVanilla={jsonPathPicker:jsonPathPicker,clearJsonPathPicker:clearJsonPathPicker},jsonpathPickerVanilla_1=jsonpathPickerVanilla.jsonPathPicker,jsonpathPickerVanilla_2=jsonpathPickerVanilla.clearJsonPathPicker,script={name:"JSONPathPicker",data:function(){return{clickedPath:"",path:{value:""}}},props:{code:{type:Object,default:function(){return{sample:"This is a sample"}}}},methods:{pickPath:function(e){e.target&&e.target.classList.contains("pick-path")&&this.$emit("path",this.path.value)}},mounted:function(){jsonpathPickerVanilla_1(this.$refs["json-renderer"],this.$props.code,[this.path])},watch:{code:function(e){jsonpathPickerVanilla_2(this.$refs["json-renderer"]),e&&jsonpathPickerVanilla_1(this.$refs["json-renderer"],this.$props.code,[this.path])}},destroyed:function(){jsonpathPickerVanilla_2(this.$refs["json-renderer"])}};function normalizeComponent(e,t,n,a,o,r,s,i,c,l){"boolean"!=typeof s&&(c=i,i=s,s=!1);var p,d="function"==typeof n?n.options:n;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,o&&(d.functional=!0)),a&&(d._scopeId=a),r?(p=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(r)},d._ssrRegister=p):t&&(p=s?function(){t.call(this,l(this.$root.$options.shadowRoot))}:function(e){t.call(this,i(e))}),p)if(d.functional){var f=d.render;d.render=function(e,t){return p.call(t),f(e,t)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,p):[p]}return n}var normalizeComponent_1=normalizeComponent,isOldIE="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function createInjector(e){return function(e,t){return addStyle(e,t)}}var HEAD=document.head||document.getElementsByTagName("head")[0],styles={};function addStyle(e,t){var n=isOldIE?t.media||"default":e,a=styles[n]||(styles[n]={ids:new Set,styles:[]});if(!a.ids.has(e)){a.ids.add(e);var o=t.source;if(t.map&&(o+="\n/*# sourceURL="+t.map.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),a.element||(a.element=document.createElement("style"),a.element.type="text/css",t.media&&a.element.setAttribute("media",t.media),HEAD.appendChild(a.element)),"styleSheet"in a.element)a.styles.push(o),a.element.styleSheet.cssText=a.styles.filter(Boolean).join("\n");else{var r=a.ids.size-1,s=document.createTextNode(o),i=a.element.childNodes;i[r]&&a.element.removeChild(i[r]),i.length?a.element.insertBefore(s,i[r]):a.element.appendChild(s)}}}var browser=createInjector,__vue_script__=script,__vue_render__=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"json-path-picker",on:{click:e.pickPath}},[n("pre",{ref:"json-renderer",staticClass:"json-tree"}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.clickedPath,expression:"clickedPath"}],staticClass:"path",attrs:{type:"hidden",id:"path"},domProps:{value:e.clickedPath},on:{change:function(t){return e.$emit("path",e.clickedPath)},input:function(t){t.target.composing||(e.clickedPath=t.target.value)}}})])},__vue_staticRenderFns__=[],__vue_inject_styles__=function(e){e&&e("data-v-ef9df3de_0",{source:".json-path-picker[data-v-ef9df3de]{padding:3px 10px}",map:void 0,media:void 0})},__vue_scope_id__="data-v-ef9df3de",__vue_module_identifier__=void 0,__vue_is_functional_template__=!1,JSONPathPicker=normalizeComponent_1({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},__vue_inject_styles__,__vue_script__,__vue_scope_id__,__vue_is_functional_template__,__vue_module_identifier__,browser,void 0),index={install:function(e){e.component("jsonpath-picker",JSONPathPicker)}};module.exports=index;
//# sourceMappingURL=index.min.js.map
